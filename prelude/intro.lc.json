{
    "type": "script",
    "cellvars": [
        {"type": "cell", "deref": true, "name": "state", "defs": 1},
        {"type": "cell", "deref": true, "name": "site", "defs": 1}
    ],
    "localvars": [
        {"type": "cell", "deref": false, "name": "State", "defs": 1},
        {"type": "cell", "deref": false, "name": "Site", "defs": 1},
        {"type": "cell", "deref": false, "name": "Sink", "defs": 1},
        {"type": "cell", "deref": false, "name": "sink", "defs": 1},
        {"type": "cell", "deref": false, "name": "param", "defs": 1}
    ],
    "body": [
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "graph_utils",
                "loc": [0, 1, 18, 1, 0]
            },
            "value": {
                "type": "call",
                "callee": {
                    "type": "slot",
                    "kind": "global",
                    "name": "import",
                    "loc": [0, 1, 18, 1, 0]
                },
                "args": [
                    {
                        "type": "literal",
                        "kind": "string",
                        "value": "graph_utils"
                    }
                ],
                "loc": [0, 1, 18, 1, 0]
            }
        },
        {
            "type": "datatype",
            "slot": {"type": "slot", "kind": "local", "index": 0},
            "vars": ["a"],
            "rows": [
                [
                    {"type": "slot", "kind": "cell", "index": 0},
                    [
                        {
                            "type": "label",
                            "name": "pol",
                            "value": {
                                "type": "slot",
                                "kind": "global",
                                "name": "Integer",
                                "loc": [17, 7, 24, 7, 0]
                            }
                        },
                        {
                            "type": "label",
                            "name": "heads",
                            "value": {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "global",
                                    "name": "Set",
                                    "loc": [17, 8, 20, 8, 0]
                                },
                                "args": [{"type": "var", "index": 0}],
                                "loc": [17, 8, 23, 8, 0]
                            }
                        },
                        {
                            "type": "label",
                            "name": "flow",
                            "value": {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "global",
                                    "name": "Set",
                                    "loc": [17, 9, 20, 9, 0]
                                },
                                "args": [
                                    {
                                        "type": "call",
                                        "callee": {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 0
                                        },
                                        "args": [{"type": "var", "index": 0}],
                                        "loc": [21, 9, 29, 9, 0]
                                    }
                                ],
                                "loc": [17, 9, 30, 9, 0]
                            }
                        },
                        {
                            "type": "label",
                            "name": "transitions",
                            "value": {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "global",
                                    "name": "Dict",
                                    "loc": [17, 10, 21, 10, 0]
                                },
                                "args": [
                                    {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "Parameter",
                                        "loc": [22, 10, 31, 10, 0]
                                    },
                                    {
                                        "type": "call",
                                        "callee": {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 0
                                        },
                                        "args": [{"type": "var", "index": 0}],
                                        "loc": [33, 10, 41, 10, 0]
                                    }
                                ],
                                "loc": [17, 10, 42, 10, 0]
                            }
                        }
                    ]
                ]
            ],
            "decls": [
                {
                    "type": "derived",
                    "ops": [
                        {
                            "type": "slot",
                            "kind": "global",
                            "name": "hash",
                            "loc": [7, 11, 11, 11, 0]
                        },
                        {
                            "type": "slot",
                            "kind": "global",
                            "name": "==",
                            "loc": [14, 11, 16, 11, 0]
                        }
                    ],
                    "value": {
                        "type": "slot",
                        "kind": "global",
                        "name": "by_reference",
                        "loc": [19, 11, 31, 11, 0]
                    }
                },
                {
                    "type": "attr_method",
                    "name": "add_flow",
                    "value": {
                        "type": "closure",
                        "cellvars": [],
                        "localvars": [
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "self",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "other",
                                "defs": 1
                            }
                        ],
                        "frame": [],
                        "args": [
                            {
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 0
                                }
                            },
                            {
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 1
                                }
                            }
                        ],
                        "body": [
                            {
                                "type": "assert",
                                "cond": {
                                    "type": "cmp",
                                    "exprs": [
                                        {
                                            "type": "slot",
                                            "kind": "attr",
                                            "base": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 0
                                            },
                                            "name": "pol",
                                            "loc": [11, 13, 19, 13, 0]
                                        },
                                        {
                                            "type": "slot",
                                            "kind": "attr",
                                            "base": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 1
                                            },
                                            "name": "pol",
                                            "loc": [23, 13, 32, 13, 0]
                                        }
                                    ],
                                    "ops": [
                                        {
                                            "type": "slot",
                                            "kind": "global",
                                            "name": "!=",
                                            "loc": [11, 13, 32, 13, 0]
                                        }
                                    ],
                                    "loc": [11, 13, 32, 13, 0]
                                },
                                "value": {
                                    "type": "literal",
                                    "kind": "string",
                                    "value": "polarity conflict"
                                },
                                "loc": [4, 13, 55, 13, 0]
                            },
                            {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "attr",
                                    "base": {
                                        "type": "slot",
                                        "kind": "attr",
                                        "base": {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 0
                                        },
                                        "name": "flow",
                                        "loc": [4, 14, 13, 14, 0]
                                    },
                                    "name": "add",
                                    "loc": [4, 14, 17, 14, 0]
                                },
                                "args": [
                                    {
                                        "type": "slot",
                                        "kind": "local",
                                        "index": 1
                                    }
                                ],
                                "loc": [4, 14, 24, 14, 0]
                            },
                            {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "attr",
                                    "base": {
                                        "type": "slot",
                                        "kind": "attr",
                                        "base": {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 1
                                        },
                                        "name": "flow",
                                        "loc": [4, 15, 14, 15, 0]
                                    },
                                    "name": "add",
                                    "loc": [4, 15, 18, 15, 0]
                                },
                                "args": [
                                    {
                                        "type": "slot",
                                        "kind": "local",
                                        "index": 0
                                    }
                                ],
                                "loc": [4, 15, 24, 15, 0]
                            }
                        ],
                        "loc": [28, 12, 24, 15, 0]
                    }
                },
                {
                    "type": "attr_method",
                    "name": "add_transition",
                    "value": {
                        "type": "closure",
                        "cellvars": [],
                        "localvars": [
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "self",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "parameter",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "other",
                                "defs": 1
                            }
                        ],
                        "frame": [],
                        "args": [
                            {
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 0
                                }
                            },
                            {
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 1
                                }
                            },
                            {
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 2
                                }
                            }
                        ],
                        "body": [
                            {
                                "type": "assert",
                                "cond": {
                                    "type": "cmp",
                                    "exprs": [
                                        {
                                            "type": "cmp",
                                            "exprs": [
                                                {
                                                    "type": "slot",
                                                    "kind": "attr",
                                                    "base": {
                                                        "type": "slot",
                                                        "kind": "local",
                                                        "index": 1
                                                    },
                                                    "name": "pol",
                                                    "loc": [12, 19, 25, 19, 0]
                                                },
                                                {
                                                    "type": "literal",
                                                    "kind": "integer",
                                                    "value": "0"
                                                }
                                            ],
                                            "ops": [
                                                {
                                                    "type": "slot",
                                                    "kind": "global",
                                                    "name": ">=",
                                                    "loc": [12, 19, 30, 19, 0]
                                                }
                                            ],
                                            "loc": [12, 19, 30, 19, 0]
                                        },
                                        {
                                            "type": "cmp",
                                            "exprs": [
                                                {
                                                    "type": "slot",
                                                    "kind": "attr",
                                                    "base": {
                                                        "type": "slot",
                                                        "kind": "local",
                                                        "index": 0
                                                    },
                                                    "name": "pol",
                                                    "loc": [36, 19, 44, 19, 0]
                                                },
                                                {
                                                    "type": "slot",
                                                    "kind": "attr",
                                                    "base": {
                                                        "type": "slot",
                                                        "kind": "local",
                                                        "index": 2
                                                    },
                                                    "name": "pol",
                                                    "loc": [48, 19, 57, 19, 0]
                                                }
                                            ],
                                            "ops": [
                                                {
                                                    "type": "slot",
                                                    "kind": "global",
                                                    "name": "==",
                                                    "loc": [36, 19, 57, 19, 0]
                                                }
                                            ],
                                            "loc": [36, 19, 57, 19, 0]
                                        }
                                    ],
                                    "ops": [
                                        {
                                            "type": "slot",
                                            "kind": "global",
                                            "name": "==",
                                            "loc": [11, 19, 58, 19, 0]
                                        }
                                    ],
                                    "loc": [11, 19, 58, 19, 0]
                                },
                                "value": {
                                    "type": "literal",
                                    "kind": "string",
                                    "value": "polarity conflict"
                                },
                                "loc": [4, 19, 27, 20, 0]
                            },
                            {
                                "type": "except",
                                "body": [
                                    {
                                        "type": "call",
                                        "callee": {
                                            "type": "slot",
                                            "kind": "attr",
                                            "base": {
                                                "type": "slot",
                                                "kind": "item",
                                                "base": {
                                                    "type": "slot",
                                                    "kind": "attr",
                                                    "base": {
                                                        "type": "slot",
                                                        "kind": "local",
                                                        "index": 0
                                                    },
                                                    "name": "transitions",
                                                    "loc": [4, 21, 20, 21, 0]
                                                },
                                                "index": {
                                                    "type": "slot",
                                                    "kind": "local",
                                                    "index": 1
                                                },
                                                "loc": [4, 21, 31, 21, 0]
                                            },
                                            "name": "add",
                                            "loc": [4, 21, 35, 21, 0]
                                        },
                                        "args": [
                                            {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 2
                                            }
                                        ],
                                        "loc": [4, 21, 42, 21, 0]
                                    }
                                ],
                                "excepts": [
                                    {
                                        "exc": {
                                            "type": "slot",
                                            "kind": "global",
                                            "name": "NoIndex",
                                            "loc": [11, 22, 18, 22, 0]
                                        },
                                        "body": [
                                            {
                                                "type": "assign",
                                                "slot": {
                                                    "type": "slot",
                                                    "kind": "item",
                                                    "base": {
                                                        "type": "slot",
                                                        "kind": "attr",
                                                        "base": {
                                                            "type": "slot",
                                                            "kind": "local",
                                                            "index": 0
                                                        },
                                                        "name": "transitions",
                                                        "loc": [
                                                            8,
                                                            23,
                                                            24,
                                                            23,
                                                            0
                                                        ]
                                                    },
                                                    "index": {
                                                        "type": "slot",
                                                        "kind": "local",
                                                        "index": 1
                                                    },
                                                    "loc": [8, 23, 35, 23, 0]
                                                },
                                                "value": {
                                                    "type": "call",
                                                    "callee": {
                                                        "type": "slot",
                                                        "kind": "global",
                                                        "name": "set",
                                                        "loc": [
                                                            38,
                                                            23,
                                                            41,
                                                            23,
                                                            0
                                                        ]
                                                    },
                                                    "args": [
                                                        {
                                                            "type": "list",
                                                            "values": [
                                                                {
                                                                    "type": "slot",
                                                                    "kind": "local",
                                                                    "index": 2
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "loc": [38, 23, 50, 23, 0]
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "loc": [4, 21, 50, 23, 0]
                            }
                        ],
                        "loc": [34, 18, 50, 23, 0]
                    }
                }
            ],
            "loc": [0, 6, 50, 23, 0]
        },
        {
            "type": "datatype",
            "slot": {"type": "slot", "kind": "local", "index": 1},
            "vars": ["op", "a"],
            "rows": [
                [
                    {"type": "slot", "kind": "cell", "index": 1},
                    [
                        {
                            "type": "label",
                            "name": "op",
                            "value": {"type": "var", "index": 0}
                        },
                        {
                            "type": "label",
                            "name": "coerces",
                            "value": {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "global",
                                    "name": "Set",
                                    "loc": [13, 35, 16, 35, 0]
                                },
                                "args": [
                                    {
                                        "type": "make_tuple",
                                        "items": [
                                            {"type": "var", "index": 0},
                                            {
                                                "type": "slot",
                                                "kind": "global",
                                                "name": "Integer",
                                                "loc": [21, 35, 28, 35, 0]
                                            },
                                            {"type": "var", "index": 0}
                                        ]
                                    }
                                ],
                                "loc": [13, 35, 33, 35, 0]
                            }
                        },
                        {
                            "type": "label",
                            "name": "param",
                            "value": {
                                "type": "slot",
                                "kind": "global",
                                "name": "Parameter",
                                "loc": [11, 36, 20, 36, 0]
                            }
                        },
                        {
                            "type": "label",
                            "name": "expect",
                            "value": {"type": "var", "index": 0}
                        },
                        {
                            "type": "label",
                            "name": "operators",
                            "value": {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "global",
                                    "name": "Dict",
                                    "loc": [15, 38, 19, 38, 0]
                                },
                                "args": [
                                    {"type": "var", "index": 0},
                                    {
                                        "type": "record",
                                        "fields": [
                                            {
                                                "name": "input",
                                                "mutable": false,
                                                "value": {
                                                    "type": "call",
                                                    "callee": {
                                                        "type": "slot",
                                                        "kind": "local",
                                                        "index": 0
                                                    },
                                                    "args": [
                                                        {
                                                            "type": "var",
                                                            "index": 0
                                                        }
                                                    ],
                                                    "loc": [31, 38, 39, 38, 0]
                                                }
                                            },
                                            {
                                                "name": "output",
                                                "mutable": false,
                                                "value": {
                                                    "type": "call",
                                                    "callee": {
                                                        "type": "slot",
                                                        "kind": "local",
                                                        "index": 0
                                                    },
                                                    "args": [
                                                        {
                                                            "type": "var",
                                                            "index": 0
                                                        }
                                                    ],
                                                    "loc": [49, 38, 57, 38, 0]
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "loc": [15, 38, 59, 38, 0]
                            }
                        },
                        {
                            "type": "label",
                            "name": "slots",
                            "value": {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "global",
                                    "name": "Dict",
                                    "loc": [11, 39, 15, 39, 0]
                                },
                                "args": [
                                    {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "Integer",
                                        "loc": [16, 39, 23, 39, 0]
                                    },
                                    {
                                        "type": "call",
                                        "callee": {
                                            "type": "slot",
                                            "kind": "global",
                                            "name": "Set",
                                            "loc": [25, 39, 28, 39, 0]
                                        },
                                        "args": [{"type": "var", "index": 0}],
                                        "loc": [25, 39, 31, 39, 0]
                                    }
                                ],
                                "loc": [11, 39, 32, 39, 0]
                            }
                        }
                    ]
                ]
            ],
            "decls": [
                {
                    "type": "derived",
                    "ops": [
                        {
                            "type": "slot",
                            "kind": "global",
                            "name": "hash",
                            "loc": [7, 40, 11, 40, 0]
                        },
                        {
                            "type": "slot",
                            "kind": "global",
                            "name": "==",
                            "loc": [14, 40, 16, 40, 0]
                        }
                    ],
                    "value": {
                        "type": "slot",
                        "kind": "global",
                        "name": "by_reference",
                        "loc": [19, 40, 31, 40, 0]
                    }
                },
                {
                    "type": "attr_method",
                    "name": "transfer",
                    "value": {
                        "type": "closure",
                        "cellvars": [
                            {
                                "type": "cell",
                                "deref": true,
                                "name": "site",
                                "defs": 1
                            }
                        ],
                        "localvars": [
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "self",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "fn",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "coerces",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "expect",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "param",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "operators",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "slots",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "index",
                                "defs": 1
                            },
                            {
                                "type": "cell",
                                "deref": false,
                                "name": "slot",
                                "defs": 1
                            }
                        ],
                        "frame": [1],
                        "args": [
                            {
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 0
                                }
                            },
                            {
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 1
                                }
                            }
                        ],
                        "body": [
                            {
                                "type": "assign",
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 2
                                },
                                "value": {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "set",
                                        "loc": [14, 42, 17, 42, 0]
                                    },
                                    "args": [
                                        {
                                            "type": "slot",
                                            "kind": "attr",
                                            "base": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 0
                                            },
                                            "name": "coerces",
                                            "loc": [18, 42, 30, 42, 0]
                                        }
                                    ],
                                    "loc": [14, 42, 31, 42, 0]
                                }
                            },
                            {
                                "type": "assign",
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 3
                                },
                                "value": {
                                    "type": "slot",
                                    "kind": "attr",
                                    "base": {
                                        "type": "slot",
                                        "kind": "local",
                                        "index": 0
                                    },
                                    "name": "expect",
                                    "loc": [13, 43, 24, 43, 0]
                                }
                            },
                            {
                                "type": "assign",
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 4
                                },
                                "value": {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "parameter",
                                        "loc": [12, 44, 21, 44, 0]
                                    },
                                    "args": [
                                        {
                                            "type": "call",
                                            "callee": {
                                                "type": "slot",
                                                "kind": "global",
                                                "name": "+expr",
                                                "loc": [22, 44, 24, 44, 0]
                                            },
                                            "args": [
                                                {
                                                    "type": "literal",
                                                    "kind": "integer",
                                                    "value": "1"
                                                }
                                            ],
                                            "loc": [22, 44, 24, 44, 0]
                                        }
                                    ],
                                    "loc": [12, 44, 25, 44, 0]
                                }
                            },
                            {
                                "type": "assign",
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 5
                                },
                                "value": {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "dict",
                                        "loc": [16, 45, 20, 45, 0]
                                    },
                                    "args": [{"type": "list", "values": []}],
                                    "loc": [16, 45, 24, 45, 0]
                                }
                            },
                            {
                                "type": "assign",
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 6
                                },
                                "value": {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "copy",
                                        "loc": [12, 46, 16, 46, 0]
                                    },
                                    "args": [
                                        {
                                            "type": "slot",
                                            "kind": "attr",
                                            "base": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 0
                                            },
                                            "name": "slots",
                                            "loc": [17, 46, 27, 46, 0]
                                        }
                                    ],
                                    "loc": [12, 46, 28, 46, 0]
                                }
                            },
                            {
                                "type": "repeat",
                                "fresh": [],
                                "heads": [
                                    {
                                        "type": "for",
                                        "slot": {
                                            "type": "slot",
                                            "kind": "tuple",
                                            "slots": [
                                                {
                                                    "type": "slot",
                                                    "kind": "local",
                                                    "index": 7
                                                },
                                                {
                                                    "type": "slot",
                                                    "kind": "local",
                                                    "index": 8
                                                }
                                            ],
                                            "loc": [8, 47, 19, 47, 0]
                                        },
                                        "value": {
                                            "type": "slot",
                                            "kind": "attr",
                                            "base": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 0
                                            },
                                            "name": "operators",
                                            "loc": [23, 47, 37, 47, 0]
                                        }
                                    }
                                ],
                                "body": [
                                    {
                                        "type": "assign",
                                        "slot": {
                                            "type": "slot",
                                            "kind": "item",
                                            "base": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 5
                                            },
                                            "index": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 7
                                            },
                                            "loc": [8, 48, 24, 48, 0]
                                        },
                                        "value": {
                                            "type": "record",
                                            "fields": [
                                                {
                                                    "name": "input",
                                                    "mutable": false,
                                                    "value": {
                                                        "type": "call",
                                                        "callee": {
                                                            "type": "slot",
                                                            "kind": "local",
                                                            "index": 1
                                                        },
                                                        "args": [
                                                            {
                                                                "type": "slot",
                                                                "kind": "attr",
                                                                "base": {
                                                                    "type": "slot",
                                                                    "kind": "local",
                                                                    "index": 8
                                                                },
                                                                "name": "input",
                                                                "loc": [
                                                                    37,
                                                                    48,
                                                                    47,
                                                                    48,
                                                                    0
                                                                ]
                                                            }
                                                        ],
                                                        "loc": [
                                                            34,
                                                            48,
                                                            48,
                                                            48,
                                                            0
                                                        ]
                                                    }
                                                },
                                                {
                                                    "name": "output",
                                                    "mutable": false,
                                                    "value": {
                                                        "type": "call",
                                                        "callee": {
                                                            "type": "slot",
                                                            "kind": "local",
                                                            "index": 1
                                                        },
                                                        "args": [
                                                            {
                                                                "type": "slot",
                                                                "kind": "attr",
                                                                "base": {
                                                                    "type": "slot",
                                                                    "kind": "local",
                                                                    "index": 8
                                                                },
                                                                "name": "output",
                                                                "loc": [
                                                                    60,
                                                                    48,
                                                                    71,
                                                                    48,
                                                                    0
                                                                ]
                                                            }
                                                        ],
                                                        "loc": [
                                                            57,
                                                            48,
                                                            72,
                                                            48,
                                                            0
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            },
                            {
                                "type": "return",
                                "value": {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "cell",
                                        "index": 0
                                    },
                                    "args": [
                                        {
                                            "type": "slot",
                                            "kind": "attr",
                                            "base": {
                                                "type": "slot",
                                                "kind": "local",
                                                "index": 0
                                            },
                                            "name": "op",
                                            "loc": [16, 49, 23, 49, 0]
                                        },
                                        {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 2
                                        },
                                        {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 3
                                        },
                                        {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 4
                                        },
                                        {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 5
                                        },
                                        {
                                            "type": "slot",
                                            "kind": "local",
                                            "index": 6
                                        }
                                    ],
                                    "loc": [11, 49, 66, 49, 0]
                                }
                            }
                        ],
                        "loc": [28, 41, 66, 49, 0]
                    }
                }
            ],
            "loc": [0, 33, 66, 49, 0]
        },
        {
            "type": "datatype",
            "slot": {"type": "slot", "kind": "local", "index": 2},
            "vars": ["op", "a"],
            "rows": [
                [
                    {"type": "slot", "kind": "local", "index": 3},
                    [
                        {
                            "type": "label",
                            "name": "index",
                            "value": {
                                "type": "slot",
                                "kind": "global",
                                "name": "Integer",
                                "loc": [35, 51, 42, 51, 0]
                            }
                        },
                        {
                            "type": "label",
                            "name": "site",
                            "value": {
                                "type": "call",
                                "callee": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 1
                                },
                                "args": [
                                    {"type": "var", "index": 0},
                                    {"type": "var", "index": 0}
                                ],
                                "loc": [50, 51, 61, 51, 0]
                            }
                        }
                    ]
                ]
            ],
            "decls": [
                {
                    "type": "derived",
                    "ops": [
                        {
                            "type": "slot",
                            "kind": "global",
                            "name": "hash",
                            "loc": [7, 52, 11, 52, 0]
                        },
                        {
                            "type": "slot",
                            "kind": "global",
                            "name": "==",
                            "loc": [14, 52, 16, 52, 0]
                        }
                    ],
                    "value": {
                        "type": "slot",
                        "kind": "global",
                        "name": "by_value",
                        "loc": [19, 52, 27, 52, 0]
                    }
                }
            ],
            "loc": [0, 51, 27, 52, 0]
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "fresh_state",
                "loc": [0, 54, 11, 54, 0]
            },
            "value": {
                "type": "closure",
                "cellvars": [
                    {"type": "cell", "deref": true, "name": "state", "defs": 1}
                ],
                "localvars": [
                    {"type": "cell", "deref": false, "name": "pol", "defs": 1}
                ],
                "frame": [0],
                "args": [
                    {"slot": {"type": "slot", "kind": "local", "index": 0}}
                ],
                "body": [
                    {
                        "type": "return",
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "cell",
                                "index": 0
                            },
                            "args": [
                                {"type": "slot", "kind": "local", "index": 0},
                                {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "set",
                                        "loc": [22, 55, 25, 55, 0]
                                    },
                                    "args": [{"type": "list", "values": []}],
                                    "loc": [22, 55, 29, 55, 0]
                                },
                                {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "set",
                                        "loc": [31, 55, 34, 55, 0]
                                    },
                                    "args": [{"type": "list", "values": []}],
                                    "loc": [31, 55, 38, 55, 0]
                                },
                                {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "dict",
                                        "loc": [40, 55, 44, 55, 0]
                                    },
                                    "args": [{"type": "list", "values": []}],
                                    "loc": [40, 55, 48, 55, 0]
                                }
                            ],
                            "loc": [11, 55, 49, 55, 0]
                        }
                    }
                ],
                "loc": [14, 54, 49, 55, 0]
            }
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "fresh_operator",
                "loc": [0, 57, 14, 57, 0]
            },
            "value": {
                "type": "closure",
                "cellvars": [
                    {"type": "cell", "deref": true, "name": "site", "defs": 1}
                ],
                "localvars": [
                    {"type": "cell", "deref": false, "name": "op", "defs": 1},
                    {
                        "type": "cell",
                        "deref": false,
                        "name": "indices",
                        "defs": 1
                    },
                    {"type": "cell", "deref": false, "name": "argc", "defs": 1},
                    {
                        "type": "cell",
                        "deref": false,
                        "name": "coerces",
                        "defs": 1
                    },
                    {
                        "type": "cell",
                        "deref": false,
                        "name": "expect",
                        "defs": 1
                    },
                    {"type": "cell", "deref": false, "name": "param", "defs": 1
                    },
                    {
                        "type": "cell",
                        "deref": false,
                        "name": "operators",
                        "defs": 1
                    },
                    {"type": "cell", "deref": false, "name": "slots", "defs": 1
                    },
                    {"type": "cell", "deref": false, "name": "index", "defs": 1}
                ],
                "frame": [1],
                "args": [
                    {"slot": {"type": "slot", "kind": "local", "index": 0}},
                    {"slot": {"type": "slot", "kind": "local", "index": 1}},
                    {"slot": {"type": "slot", "kind": "local", "index": 2}}
                ],
                "body": [
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 3},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "set",
                                "loc": [14, 58, 17, 58, 0]
                            },
                            "args": [],
                            "loc": [14, 58, 19, 58, 0]
                        }
                    },
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 4},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "get_function_header",
                                "loc": [13, 59, 32, 59, 0]
                            },
                            "args": [
                                {"type": "slot", "kind": "local", "index": 2}
                            ],
                            "loc": [13, 59, 38, 59, 0]
                        }
                    },
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 5},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "parameter",
                                "loc": [12, 60, 21, 60, 0]
                            },
                            "args": [
                                {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "+expr",
                                        "loc": [22, 60, 24, 60, 0]
                                    },
                                    "args": [
                                        {
                                            "type": "literal",
                                            "kind": "integer",
                                            "value": "1"
                                        }
                                    ],
                                    "loc": [22, 60, 24, 60, 0]
                                }
                            ],
                            "loc": [12, 60, 25, 60, 0]
                        }
                    },
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 6},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "dict",
                                "loc": [16, 61, 20, 61, 0]
                            },
                            "args": [],
                            "loc": [16, 61, 22, 61, 0]
                        }
                    },
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 7},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "dict",
                                "loc": [12, 62, 16, 62, 0]
                            },
                            "args": [],
                            "loc": [12, 62, 18, 62, 0]
                        }
                    },
                    {
                        "type": "repeat",
                        "fresh": [],
                        "heads": [
                            {
                                "type": "for",
                                "slot": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 8
                                },
                                "value": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 1
                                }
                            }
                        ],
                        "body": [
                            {
                                "type": "assign",
                                "slot": {
                                    "type": "slot",
                                    "kind": "item",
                                    "base": {
                                        "type": "slot",
                                        "kind": "local",
                                        "index": 7
                                    },
                                    "index": {
                                        "type": "slot",
                                        "kind": "local",
                                        "index": 8
                                    },
                                    "loc": [8, 64, 20, 64, 0]
                                },
                                "value": {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "set",
                                        "loc": [23, 64, 26, 64, 0]
                                    },
                                    "args": [],
                                    "loc": [23, 64, 28, 64, 0]
                                }
                            }
                        ]
                    },
                    {
                        "type": "return",
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "cell",
                                "index": 0
                            },
                            "args": [
                                {"type": "slot", "kind": "local", "index": 0},
                                {"type": "slot", "kind": "local", "index": 3},
                                {"type": "slot", "kind": "local", "index": 4},
                                {"type": "slot", "kind": "local", "index": 5},
                                {"type": "slot", "kind": "local", "index": 6},
                                {"type": "slot", "kind": "local", "index": 7}
                            ],
                            "loc": [11, 65, 61, 65, 0]
                        }
                    }
                ],
                "loc": [17, 57, 61, 65, 0]
            }
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "fresh_port",
                "loc": [0, 67, 10, 67, 0]
            },
            "value": {
                "type": "closure",
                "cellvars": [],
                "localvars": [
                    {"type": "cell", "deref": false, "name": "input", "defs": 1
                    },
                    {
                        "type": "cell",
                        "deref": false,
                        "name": "output",
                        "defs": 1
                    }
                ],
                "frame": [],
                "args": [],
                "body": [
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 0},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "fresh_state",
                                "loc": [12, 68, 23, 68, 0]
                            },
                            "args": [
                                {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "-expr",
                                        "loc": [24, 68, 26, 68, 0]
                                    },
                                    "args": [
                                        {
                                            "type": "literal",
                                            "kind": "integer",
                                            "value": "1"
                                        }
                                    ],
                                    "loc": [24, 68, 26, 68, 0]
                                }
                            ],
                            "loc": [12, 68, 27, 68, 0]
                        }
                    },
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 1},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "fresh_state",
                                "loc": [13, 69, 24, 69, 0]
                            },
                            "args": [
                                {
                                    "type": "call",
                                    "callee": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "+expr",
                                        "loc": [25, 69, 27, 69, 0]
                                    },
                                    "args": [
                                        {
                                            "type": "literal",
                                            "kind": "integer",
                                            "value": "1"
                                        }
                                    ],
                                    "loc": [25, 69, 27, 69, 0]
                                }
                            ],
                            "loc": [13, 69, 28, 69, 0]
                        }
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "attr",
                            "base": {
                                "type": "slot",
                                "kind": "local",
                                "index": 0
                            },
                            "name": "add_flow",
                            "loc": [4, 70, 18, 70, 0]
                        },
                        "args": [{"type": "slot", "kind": "local", "index": 1}],
                        "loc": [4, 70, 26, 70, 0]
                    },
                    {
                        "type": "return",
                        "value": {
                            "type": "record",
                            "fields": [
                                {
                                    "name": "main",
                                    "mutable": false,
                                    "value": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "main",
                                        "loc": [12, 71, 17, 71, 0]
                                    }
                                },
                                {
                                    "name": "main",
                                    "mutable": false,
                                    "value": {
                                        "type": "slot",
                                        "kind": "global",
                                        "name": "main",
                                        "loc": [19, 71, 25, 71, 0]
                                    }
                                }
                            ]
                        }
                    }
                ],
                "loc": [13, 67, 26, 71, 0]
            }
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "fresh_free_port",
                "loc": [0, 73, 15, 73, 0]
            },
            "value": {
                "type": "closure",
                "cellvars": [],
                "localvars": [
                    {"type": "cell", "deref": false, "name": "graph", "defs": 1
                    },
                    {"type": "cell", "deref": false, "name": "port", "defs": 1}
                ],
                "frame": [],
                "args": [
                    {"slot": {"type": "slot", "kind": "local", "index": 0}}
                ],
                "body": [
                    {
                        "type": "assign",
                        "slot": {"type": "slot", "kind": "local", "index": 1},
                        "value": {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "fresh_port",
                                "loc": [11, 74, 21, 74, 0]
                            },
                            "args": [],
                            "loc": [11, 74, 23, 74, 0]
                        }
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "attr",
                            "base": {
                                "type": "slot",
                                "kind": "local",
                                "index": 0
                            },
                            "name": "add",
                            "loc": [4, 75, 13, 75, 0]
                        },
                        "args": [
                            {
                                "type": "slot",
                                "kind": "attr",
                                "base": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 1
                                },
                                "name": "input",
                                "loc": [14, 75, 24, 75, 0]
                            }
                        ],
                        "loc": [4, 75, 25, 75, 0]
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "attr",
                            "base": {
                                "type": "slot",
                                "kind": "local",
                                "index": 0
                            },
                            "name": "add",
                            "loc": [4, 76, 13, 76, 0]
                        },
                        "args": [
                            {
                                "type": "slot",
                                "kind": "attr",
                                "base": {
                                    "type": "slot",
                                    "kind": "local",
                                    "index": 1
                                },
                                "name": "output",
                                "loc": [14, 76, 25, 76, 0]
                            }
                        ],
                        "loc": [4, 76, 26, 76, 0]
                    },
                    {
                        "type": "return",
                        "value": {"type": "slot", "kind": "local", "index": 1}
                    }
                ],
                "loc": [18, 73, 15, 77, 0]
            }
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "test1",
                "loc": [0, 81, 5, 81, 0]
            },
            "value": {
                "type": "call",
                "callee": {"type": "slot", "kind": "cell", "index": 0},
                "args": [
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "+expr",
                            "loc": [14, 81, 16, 81, 0]
                        },
                        "args": [
                            {"type": "literal", "kind": "integer", "value": "1"}
                        ],
                        "loc": [14, 81, 16, 81, 0]
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "set",
                            "loc": [18, 81, 21, 81, 0]
                        },
                        "args": [{"type": "list", "values": []}],
                        "loc": [18, 81, 25, 81, 0]
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "set",
                            "loc": [27, 81, 30, 81, 0]
                        },
                        "args": [{"type": "list", "values": []}],
                        "loc": [27, 81, 34, 81, 0]
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "dict",
                            "loc": [36, 81, 40, 81, 0]
                        },
                        "args": [{"type": "list", "values": []}],
                        "loc": [36, 81, 44, 81, 0]
                    }
                ],
                "loc": [8, 81, 45, 81, 0]
            }
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "test2",
                "loc": [0, 82, 5, 82, 0]
            },
            "value": {
                "type": "call",
                "callee": {"type": "slot", "kind": "cell", "index": 0},
                "args": [
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "-expr",
                            "loc": [14, 82, 16, 82, 0]
                        },
                        "args": [
                            {"type": "literal", "kind": "integer", "value": "1"}
                        ],
                        "loc": [14, 82, 16, 82, 0]
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "set",
                            "loc": [18, 82, 21, 82, 0]
                        },
                        "args": [{"type": "list", "values": []}],
                        "loc": [18, 82, 25, 82, 0]
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "set",
                            "loc": [27, 82, 30, 82, 0]
                        },
                        "args": [{"type": "list", "values": []}],
                        "loc": [27, 82, 34, 82, 0]
                    },
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "dict",
                            "loc": [36, 82, 40, 82, 0]
                        },
                        "args": [{"type": "list", "values": []}],
                        "loc": [36, 82, 44, 82, 0]
                    }
                ],
                "loc": [8, 82, 45, 82, 0]
            }
        },
        {
            "type": "call",
            "callee": {
                "type": "slot",
                "kind": "attr",
                "base": {
                    "type": "slot",
                    "kind": "global",
                    "name": "test1",
                    "loc": [0, 83, 5, 83, 0]
                },
                "name": "add_flow",
                "loc": [0, 83, 14, 83, 0]
            },
            "args": [
                {
                    "type": "slot",
                    "kind": "global",
                    "name": "test2",
                    "loc": [15, 83, 20, 83, 0]
                }
            ],
            "loc": [0, 83, 21, 83, 0]
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "test3",
                "loc": [0, 85, 5, 85, 0]
            },
            "value": {
                "type": "call",
                "callee": {
                    "type": "slot",
                    "kind": "global",
                    "name": "fresh_state",
                    "loc": [8, 85, 19, 85, 0]
                },
                "args": [
                    {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "global",
                            "name": "+expr",
                            "loc": [20, 85, 22, 85, 0]
                        },
                        "args": [
                            {"type": "literal", "kind": "integer", "value": "1"}
                        ],
                        "loc": [20, 85, 22, 85, 0]
                    }
                ],
                "loc": [8, 85, 23, 85, 0]
            }
        },
        {
            "type": "assign",
            "slot": {
                "type": "slot",
                "kind": "global",
                "name": "fn",
                "loc": [0, 86, 2, 86, 0]
            },
            "value": {
                "type": "call",
                "callee": {
                    "type": "slot",
                    "kind": "global",
                    "name": "face",
                    "loc": [5, 86, 9, 86, 0]
                },
                "args": [
                    {
                        "type": "slot",
                        "kind": "attr",
                        "base": {
                            "type": "slot",
                            "kind": "global",
                            "name": "graph_utils",
                            "loc": [10, 86, 21, 86, 0]
                        },
                        "name": "greedy_biclique_decomposition",
                        "loc": [10, 86, 51, 86, 0]
                    }
                ],
                "loc": [5, 86, 52, 86, 0]
            }
        },
        {
            "type": "call",
            "callee": {
                "type": "slot",
                "kind": "attr",
                "base": {
                    "type": "slot",
                    "kind": "attr",
                    "base": {
                        "type": "slot",
                        "kind": "global",
                        "name": "test3",
                        "loc": [0, 87, 5, 87, 0]
                    },
                    "name": "heads",
                    "loc": [0, 87, 11, 87, 0]
                },
                "name": "add",
                "loc": [0, 87, 15, 87, 0]
            },
            "args": [
                {
                    "type": "slot",
                    "kind": "global",
                    "name": "fn",
                    "loc": [16, 87, 18, 87, 0]
                }
            ],
            "loc": [0, 87, 19, 87, 0]
        },
        {
            "type": "repeat",
            "fresh": [],
            "heads": [
                {
                    "type": "for",
                    "slot": {"type": "slot", "kind": "local", "index": 4},
                    "value": {
                        "type": "call",
                        "callee": {
                            "type": "slot",
                            "kind": "attr",
                            "base": {
                                "type": "slot",
                                "kind": "global",
                                "name": "fn",
                                "loc": [13, 88, 15, 88, 0]
                            },
                            "name": "params",
                            "loc": [13, 88, 22, 88, 0]
                        },
                        "args": [],
                        "loc": [13, 88, 24, 88, 0]
                    }
                }
            ],
            "body": [
                {
                    "type": "call",
                    "callee": {
                        "type": "slot",
                        "kind": "attr",
                        "base": {
                            "type": "slot",
                            "kind": "global",
                            "name": "test3",
                            "loc": [4, 89, 9, 89, 0]
                        },
                        "name": "add_transition",
                        "loc": [4, 89, 24, 89, 0]
                    },
                    "args": [
                        {"type": "slot", "kind": "local", "index": 4},
                        {
                            "type": "call",
                            "callee": {
                                "type": "slot",
                                "kind": "global",
                                "name": "fresh_state",
                                "loc": [32, 89, 43, 89, 0]
                            },
                            "args": [
                                {
                                    "type": "slot",
                                    "kind": "attr",
                                    "base": {
                                        "type": "slot",
                                        "kind": "local",
                                        "index": 4
                                    },
                                    "name": "pol",
                                    "loc": [44, 89, 53, 89, 0]
                                }
                            ],
                            "loc": [32, 89, 54, 89, 0]
                        }
                    ],
                    "loc": [4, 89, 55, 89, 0]
                }
            ]
        }
    ],
    "sources": ["intro.lc"]
}
